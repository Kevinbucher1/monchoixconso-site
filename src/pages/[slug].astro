---
// Étape 1 : Importer les outils nécessaires
import BaseLayout from '../layouts/BaseLayout.astro';
// Assurez-vous que le chemin vers votre fonction strapi est correct

// MODIFICATION : On utilise "getLandingPages" pour correspondre au vrai nom dans votre fichier strapi.js
import { getLandingPages } from '../lib/strapi';

// Étape 2 : Définir les chemins de toutes les pages à créer
export async function getStaticPaths() {
    // On appelle bien "getLandingPages()"
    const pages = await getLandingPages() ?? []; // On garde la sécurité ?? []
    
    return pages.map((page) => ({
        params: { slug: page.slug },
        props: { page },
    }));
}

// Étape 3 : Récupérer les données pour CETTE page spécifique
const { page } = Astro.props;
---

{/* La propriété "showFooter" est bien présente */}
<BaseLayout pageTitle={page.slug} showFooter={page.afficher_footer}>
    <div set:html={page.contenu} />
</BaseLayout>